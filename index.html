<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Generador de Archivos .fth</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.0/jszip.min.js"></script>
</head>
<body>
  <h2>Generador de configuraciones .fth por % de s√≥lidos</h2>
  <input type="file" id="fileInput" accept=".fth"><br><br>
  <button onclick="generarArchivos()">Generar archivos del 5% al 60%</button><br><br>
  <a id="descargarZip" style="display:none;">Descargar archivos .zip</a>

  <script>
    function generarArchivos() {
      const input = document.getElementById('fileInput');
      if (!input.files[0]) {
        alert('Por favor, sube un archivo .fth primero');
        return;
      }

      const reader = new FileReader();
      reader.onload = function(event) {
        const contenido = event.target.result;
        const zip = new JSZip();
        const regex = /,[0-9]{1,3},Percent/;

        for (let ss = 5; ss <= 60; ss += 5) {
          const nuevoContenido = contenido.replace(regex, `,${ss},Percent`);
          zip.file(`modelo_${ss}.fth`, nuevoContenido);
        }

        zip.generateAsync({ type: 'blob' })
          .then(function(content) {
            const enlace = document.getElementById('descargarZip');
            enlace.href = URL.createObjectURL(content);
            enlace.download = 'modelos_generados.zip';
            enlace.textContent = 'Descargar modelos_generados.zip';
            enlace.style.display = 'inline';
          });
      };

      reader.readAsText(input.files[0]);
    }
  </script>
</body>
</html>

